= Глоссарий Терминов =

Доработать.

= Модели требований =
== Предметная область ==
Предметная область приложения включает в себя разработку ПО для тренировки навыков слепой печати. Это включает создание интерактивных интерфейсов, игровых механик и технических решений для поддержки многопользовательского режима. Основные компоненты включают систему тренировок, рейтинговую систему и серверную инфраструктуру для организации соревнований.

=== Объекты предметной области ===

# Игровой Процесс: визуальное отображение текстового набора, выполняемого пользователем для обучения слепой печати и её тренировки.
## Чат: Функционал, предоставляемая приложением для общения между пользователями с помощью текста.
## Лобби: Функционал, предоставляемый приложением для взаимодействия между пользователями в рамках функций приложения.
## Статистика: Функционал, предоставляемый приложением для мониторинга успешности ввода игроком текста во время игры. Например, Количество слов в минуту, количество ошибок, и точность ввода
## Режимы: Игровые режимы, предоставляемые приложением.
### Онлайн Режим: Режим, позволяющий пользователям соревноваться друг с другом в рамках приложения.
### Оффлайн Режимы: Режим, позволяющий пользователю тренировать слепую печать без подключения к сети.
#### Кампания: режим, предоставляющий разные шаблоны действий для практики слепой печати, а также инструкции, помогающие в этом.
#### Бесконечный: режим, предоставляющий бесконечный набор текста для тренировки пользователя, останавливаемый по команде пользователя.
## Фазы Игры: 
### Фаза Подключения: фаза, когда приложение ожидает загрузки всех пользователей в случае если игра многопользовательская, или если пользователь выбрал оффлайн режим, ожидает загрузки инструкций для последующего набора текста пользователем.
### Фаза Игры: фаза набора текста пользователем.
### Фаза Подытоживания: фаза обобщения результатов ввода пользователем, а также сохранение их в его профиль. для оффлайн режима это достижения и средняя скорость печати, для онлайн режима это рейтинг и средняя скорость печати.
# Пользователи:
## Пользователь системы: Любой человек, установивший приложение на свой персональный компьютер.
## Невторизованный пользователь: Пользователь, имеющий доступ к базовым функциями(Оффлайн) установленного приложения. 
## Авторизованный пользователь: Пользователь, имеющий доступ и к базовым функциям(Оффлайн), и к расширенным функциям(Онлайн) установленного приложения.
## Администратор: Пользователь, имеющий доступ к модерированию доступа Авторизованных Пользователей с помощью панели Администратора.
# Аналитика и статистика:
## Достижения: Виртуальная награда, поощряющая прогресс в кампании.
## Рейтинг: 
### Рейтинг Пользователя: Метрика, отображающая опыт пользователя в многопользовательских играх.
### Таблица Лидеров: Таблица пользователей, имеющих наибольший рейтинг в рамках текущего приложения.
## Сохранение: Запись о текущем прогрессе пользователя.
# Администрирование
## Модерирование пользователей: Функционал для блокировки, ограничения действий и наказаний, предоставляемых модератором для недобросовестных пользователей.
## Просмотр событий приложения: Функционал для отслеживания состояния приложения и просмотра жалоб.
# Авторизация: Функционал, предоставляющий возможность привязать свой прогресс к собственному профилю, а также переносить его между разными устройствами.
# Профиль пользователя: Персонализированная пользователем страница, отображающая его прогресс, рейтинг, а также достижения и статистику об опыте слепой печати.
=== Модель предметной области ===

[[Файл:Blind Typer Предметная область схем.png]]

=== Модели пользователей системы ===

# '''Неавторизованный пользователь'''
## Должен иметь доступ к кампании
## Должен иметь доступ к Регистрации, Авторизации, Восстановлению пароля.
## Должен иметь свой локальный профиль для сохранения прогресса внутри приложения на устройстве.
# '''Авторизованный пользователь'''
## Должен наследовать права доступа неавторизованного пользователя
## Должен иметь доступ к Онлайн части приложения
### Должен иметь доступ к многопользовательским Лобби
### Должен иметь доступ к рейтинговой таблице
### Должен иметь свой личный профиль в приложении, для доступа и синхронизации с любого устройства
# '''Пользователь-Организатор'''
## Должен иметь доступ к настройке своего лобби
## Должен иметь доступ к модерированию пользователями в рамках собственного лобби
# '''Администратор'''
## Должен иметь доступ к списку всех пользователей
## Должен иметь доступ к отчётам мониторинга приложения
## Должен иметь доступ к модерированию пользователями приложения(Например, отключение пользователям возможность использовать чат, отключение пользователям возможность подключения к лобби, отключение пользователям доступ к "Онлайн" составляющей)
## Должен иметь доступ к списку жалоб от Пользователей приложения

= Первичный список требований =

Каждое из требований, предъявляемых к проектируемой системе, имеет один из следующих приоритетов

* H - высокий
* M - средний
* L - низкий

Категория определяет приоритет выполнения требований на последующих стадиях. Первыми реализуются требования с высоким приоритетом, вторыми - со средним, третьими - с низким. Предполагается, что требования с высоким приоритетом будут выполнены даже в худших условиях.


== Функциональные требования ==

# Пользователь:
## Неавторизованный пользователь:
### Пользователь должен иметь возможность запустить игру. (H)
### Пользователь должен иметь возможность поставить игру на паузу. (H)
### Пользователь должен иметь возможность переключать меню приложения. (H)
## Авторизованный пользователь:
### Пользователь должен иметь те же возможности, что и неавторизованный пользователь. (M)
### Пользователь должен иметь возможность просматривать свой профиль.(Достижения, оформление, отображаемое имя и картинку профиля)(M)
### Пользователь должен иметь возможность редактировать свой профиль.(Картинку профиля, Отображаемое имя)(M)

# Взаимодействие Пользователей:
## Пользователи должны иметь возможность видеть достижения друг друга.(Н)
## Пользователи должны иметь возможность общаться друг с другом с помощью чата лобби, в котором они находятся.(М)
## Пользователи должны иметь возможность просматривать профили друг друга.(L)

# Система сохранений:
## Пользователь должен иметь возможность сохранять свои достижения на сервере, для возможности переноса между устройствами.(H)
## Пользователь должен иметь возможность зайти в свой профиль с сохранением всех данных(H)
## Прогресс Пользователя должен быть привязан к его профилю.(L)

# Начало игры:
## Пользователь должен иметь возможность выбрать режим игры.
### Режим "Кампания":
#### Пользователь должен получить рекомендации и тренировку для слепой печати.(H)
#### Пользователь должен иметь возможность выбирать уровень в зависимости от его прогресса прохождения кампании.(Н)
### Режим "Бесконечная игра":
#### Пользователь должен иметь возможность выбирать параметры для данного режима игры. (Например, количество символов, время на выполнение задания)(H)
#### Пользователь должен видеть свою статистику в процессе игры. (Например, точность ввода, скорость печати, кол-во ошибок набора(M)
### Режим "Онлайн игра":
#### Пользователь должен иметь возможность подключаться к другим лобби, выбрав его из списка доступных игр.(H)
#### Если лобби имеет пароль, Пользователь должен ввести корректный пароль для подключения. (H)
#### Пользователь должен получить уведомление в случае, если лобби заполнено или недоступно. (M)
#### Пользователь должен иметь возможность создать своё лобби.(H)
#### Пользователь-Организатор должен иметь возможность задавать параметры создаваемой игры. (количество Пользователей, приватность лобби, пароль для подключения, сложность текста - если хочет)(M)
#### Пользователь-Организатор лобби должен иметь возможность видеть состояние готовности Пользователей в лобби, после чего, если у всех Пользователей выбран индикатор "Готов", нажать кнопку "Старт игры". (H)
#### Пользователь должен иметь возможность видеть настройки лобби, а также сложность текста, отображаемого для набора в формате 1* - легко, 2* - средняя сложность, 3* - высокая сложность, 4* - чрезвычайная сложность. (L)
#### Система должна автоматически удалять пустые лобби после выхода всех Пользователей. (L)

# Игровой процесс:
## Фаза подготовки к набору:
### Перед началом ввода текста, Пользователь должен видеть индикатор старта (т.е. после сигнала "Старт", Пользователь получит возможность набирать текст, отображаемый на экране)(M)
### Пользователь должен иметь возможность видеть текст, который ему предстоит набирать за 5 секунд до начала матча.(L)
### Для онлайн игры система должна дождаться подключения всех Пользователей перед началом.(H)
## Фаза набора текста:
### Пользователь должен иметь возможность видеть визуальное отображение корректности ввода. (Неправильно введённые символы - подсвечиваются красным, Уже введённые символы, если введены корректно - подсвечиваются зелёным. Ещё не введённый текст - подсвечивается серым)(H)
### Пользователь должен иметь возможность видеть свою статистику и ожидать подсчёта результата игры в специальном меню ожидания результатов онлайн игры.(M)
## Фаза отображения результатов:
### Пользователь должен иметь возможность видеть статистику игры.(L)

# Рейтинговая система для  онлайн игры:
## Система должна учитывать средний рейтинг Пользователей в лобби, подготавливая текст, наиболее подходящий для всех Пользователей одновременно.(H)
## Система должна определять позицию Пользователя в рейтинговой таблице, а также в таблице результатов прошедшего матча.(L)

# Авторизация и управление учётной записью:
## Пользователь должен иметь возможность зарегистрироваться в системе, указав логин, пароль и адрес электронной почты. (H)
## Система должна проверять корректность введённых данных при регистрации. (H)
## Пользователь должен иметь возможность войти в систему, используя логин и пароль. (H)
## Пользователь должен иметь возможность восстановить пароль через электронную почту. (M)
## Пользователь должен иметь возможность изменить пароль из настроек профиля. (M)
## Система должна уведомлять пользователя об ошибке при неверном вводе логина или пароля. (H)
## Система должна позволять Пользовательу выйти из профиля, деактивируя токен авторизации. (H)

# Пользовательские сессии:
## Пользователь должен иметь возможность оставаться в системе в течение 14 дней при активном токене. (M)
## При повторном входе на устройство с активным токеном авторизация должна выполняться автоматически. (M)
## При выходе из системы токен должен аннулироваться, и повторный вход потребует авторизацию. (H)
## В случае истечения срока действия токена система должна уведомить Пользователя о необходимости повторного входа. (M)

# Администрирование:
## Администратор должен иметь возможность авторизоваться в Панели Администратора(H)
## Администратор должен иметь возможность найти Пользователя по его логину.(M)
## Администратор должен иметь возможность просматривать жалобы на игроков.(M)
## Администратор должен иметь возможность ограничивать доступ к лобби, чату, приложению для выбранного пользователя.(M)


== Ограничения ==

'''Средства разработки:'''
# Язык программирования C++(Клиент), Golang(Сервер).
# Для разработки требуется интегрированная среда разработки.
# Для взаимодействий с базой данных применяется PostgreSQL для данных и Redis для часто запрашиваемых ресурсов, таких как Таблица Лидеров.
# Для системы контроля версий используется Git (Github/Gitlab)

'''Безопасность и доступ:'''
# Доступ к многопользовательским сессиям и участию в рейтинговой таблице требует авторизации.
# Токен активен 14 дней и деактивируется при выходе из профиля.
# Пароли хранятся в зашифрованном виде.
# Игрок(Роль) - доступ к игре и обучению с возможностью участия в многопользовательских сессиях.
# Админ(Роль) - доступ к панели администрирования и модерирования пользователей.

'''Требования к системе (Интерфейсу):'''
# Пользовательский интерфейс доступен только на русском языке.
# При регистрации логин должен содержать от 6 до 20 символов, пароль от 8 до 64 символов или специальных символов.
# Игра должно работать на следующих ОС на момент разработки: Windows 10, Windows 11.
# Пользователь не может предоставлять более 1 лобби.

'''Требования к Панели Администрирования:'''
# Панель администрирования должна быть доступна в любом браузере.

== Функциональная модель ==

'''Сценарий 1: Запуск игры (п. 1.1 ФТ)'''
# Пользователь запускает приложение.
# Система проверяет наличие сохранённых данных пользователя.
# Загружает главное меню игры.
# Отображается главное меню с кнопками: «Начать игру», «Профиль», «Настройки», «Выход».

'''Сценарий 2: Пауза и выход в главное меню (п. 1.2–1.3 ФТ)'''
# Пользователь нажимает клавишу Esc во время игры.
# Приложение останавливает таймер и процесс ввода текста.
# Отображается меню паузы с кнопками: «Продолжить», «Главное меню», «Выход из игры».

'''# Сценарий 3: Просмотр профиля игрока (п. 1.4 ФТ)'''
# Пользователь выбирает пункт меню «Профиль».
# Система отображает статистику: количество сыгранных матчей, средняя скорость набора текста, достижения пользователя.

'''Сценарий 4: Редактирование профиля (п. 1.5 ФТ)'''
# Пользователь открывает свой профиль, нажимает кнопку «Редактировать», вводит новое имя или аватар и нажимает «Сохранить».
# Система проверяет корректность данных, сохраняет изменения в базе данных, отображает обновлённые данные профиля Пользователя.

'''Сценарий 5: Отображение прогресса других игроков в реальном времени (п. 2.1 ФТ)'''
# Пользователь участвует в онлайн игре.
# Система передаёт данные о скорости и проценте выполнения другим пользователям в том же лобби.
# На экране пользователя отображается индикатор прогресса всех участников текущей игры.

'''Сценарий 6: Общая пауза для всех игроков (п. 2.2 ФТ)'''
# Один из пользователей ставит игру на паузу.
# Система приостанавливает матч для всех пользователей, отображает уведомление «Игра на паузе».

'''Сценарий 7: Общение игроков через чат (п. 2.3 ФТ)'''
# Пользователь открывает чат лобби, вводит сообщение и нажимает Enter.
# Система отправляет сообщение на сервер и отображает его у всех пользователей текущего лобби.

'''Сценарий 8: Просмотр профиля другого игрока (п. 2.4 ФТ)'''
# Пользователь нажимает на имя другого пользователя.
# Система загружает и отображает информацию о нём: достижения, средняя скорость, количество онлайн игр.

'''Сценарий 9: Сохранение прогресса (п. 3.1 ФТ)'''
# Пользователь завершает игру.
# Система сохраняет результаты онлайн игры в облаке или локальном профиле.

'''Сценарий 10: Загрузка сохранения (п. 3.2 ФТ)'''
# Пользователь выбирает пункт «Продолжить игру».
# Система загружает последнее сохранение и возобновляет процесс.

'''Сценарий 11: Выбор режима игры (п. 4.1 ФТ)'''
# Пользователь нажимает «Начать игру».
# Система предлагает выбор: Кампания, Бесконечный режим, Онлайн.

'''Сценарий 12: Режим "Кампания" (п. 4.1.1 ФТ)'''
# Пользователь выбирает «Кампания».
# Система запускает режим с подсказками и примером набора текста.
# Пользователь получает рекомендации и тренировку для слепой печати.
# Пользователь может выбирать уровень в зависимости от прогресса кампании.

'''Сценарий 13: Режим "Бесконечная игра" (п. 4.1.2 ФТ)'''
# Пользователь выбирает бесконечный режим.
# Система загружает случайный текст и начинает игру без соперников.
# Пользователь может выбирать параметры игры (количество символов, время на задание).
# Пользователь видит свою статистику в процессе игры (точность, скорость, ошибки).

'''Сценарий 14: Режим "Онлайн игра" (п. 4.1.3 ФТ)'''
# Пользователь выбирает «Онлайн».
# Система отображает список доступных лобби и кнопки: «Создать», «Присоединиться».

'''Сценарий 15: Создание лобби (п. 4.1.3.1 ФТ)'''
# Пользователь выбирает «Создать лобби», настраивает параметры: количество пользователей, тип текста, приватность, пароль, сложность текста.
# Система создаёт лобби на сервере и ожидает подключения других пользователей.

'''Сценарий 16: Присоединение к лобби (п. 4.1.3.2 ФТ)'''
# Пользователь выбирает лобби из списка и нажимает «Присоединиться».
# Система подключает пользователя и отображает список участников.

'''Сценарий 17: Подключение к приватному лобби (п. 4.1.3.3 ФТ)'''
# Пользователь вводит пароль для приватного лобби.
# Система проверяет корректность пароля и подключает к выбранному лобби.

'''Сценарий 18: Ошибка подключения (п. 4.1.3.4 ФТ)'''
# Система проверяет доступность лобби.
# Если лобби недоступно — отображает сообщение об ошибке и кнопку «Повторить попытку».

'''Сценарий 19: Удаление пустого лобби (п. 4.1.3.5 ФТ)'''
# При отсутствии пользователей в лобби, система автоматически закрывает возможность подключения к лобби и удаляет его из памяти.

'''Сценарий 20: Пользователь-Организатор покидает лобби (п. 4.1.3.6 ФТ)'''
# Система назначает новым владельцем лобби следующего подключившегося пользователя по порядку.

'''Сценарий 21: Пользователь не успел подключиться до начала игры (п. 4.1.3.7 ФТ)'''
# Система останавливает фазу подготовки и возвращает пользователей в лобби.

'''Сценарий 22: Ожидание готовности игроков (п. 4.2 ФТ)'''
# Пользователь после подключения нажимает «Готов».
# Система проверяет готовность всех пользователей в лобби и запускает обратный отсчёт, если все пользователи готовы.

'''Сценарий 23: Фаза подготовки (п. 5.1 ФТ)'''
# Система показывает 3-секундный таймер до старта, после которого на экране пользователя появляется текст для набора.

'''Сценарий 24: Фаза набора текста (п. 5.2 ФТ)'''
# Пользователь начинает печатать текст.
# Система подсвечивает правильные и ошибочные символы, обновляет скорость и прогресс.
# Если не все пользователи окончили набор текста, выводится сообщение об ожидании остальных и их прогрессе.

'''Сценарий 25: Фаза отображения результатов (п. 5.3 ФТ)'''
# Система отображает таблицу результатов: скорость, точность, место на основе статистики.

'''Сценарий 26: Подбор текста по рейтингу (п. 6.1 ФТ)'''
# Система выбирает текст, соответствующий среднему рейтингу игроков перед началом матча.

'''Сценарий 27: Начисление рейтинга и отображение позиции (п. 6.2–6.3 ФТ)'''
# Система обновляет рейтинг пользователя после игры и отображает его место в таблице лидеров.

'''Сценарий 28: Регистрация нового пользователя (п. 7.1–7.2 ФТ)'''
# Пользователь открывает экран регистрации, вводит логин, email, пароль, нажимает «Зарегистрироваться».
# Система проверяет уникальность данных, создаёт запись в базе, отправляет письмо для подтверждения регистрации.
# Пользователь переходит по ссылке из письма, подтверждая регистрацию.

'''Сценарий 29: Авторизация пользователя (п. 7.3–7.6 ФТ)'''
# Пользователь вводит логин и пароль, нажимает «Войти».
# Система проверяет корректность данных, создаёт токен сессии, перенаправляет в главное меню.

'''Сценарий 30: Некорректные данные при авторизации (п. 7.3 ФТ)'''
# Система выводит сообщение об ошибке.
# Если пользователь ошибается 5 раз подряд, доступ блокируется на 1 час.

'''Сценарий 31: Авторизация заблокированного пользователя (п. 7.3 ФТ)'''
# Система выводит сообщение о блокировке профиля, срок блокировки и причину.

'''Сценарий 32: Восстановление пароля (п. 7.4 ФТ)'''
# Пользователь нажимает «Забыли пароль?» и вводит email.
# Система отправляет письмо со ссылкой для восстановления.

'''Сценарий 33: Изменение пароля из профиля (п. 7.5 ФТ)'''
# Пользователь выбирает «Сменить пароль», вводит старый и новый пароль.
# Система проверяет старый пароль и обновляет данные.

'''Сценарий 34: Выход из профиля (п. 7.7 ФТ)'''
# Пользователь нажимает «Выйти из аккаунта».
# Система удаляет токен и возвращает на экран авторизации.

'''Сценарий 35: Автоматическая авторизация (п. 8.1–8.2 ФТ)'''
# Система проверяет наличие активного токена при запуске.
# Если токен действителен — выполняет вход автоматически.

'''Сценарий 36: Аннулирование токена (п. 8.3 ФТ)'''
# Система при выходе из профиля удаляет токен из памяти устройства.

'''Сценарий 37: Истечение токена (п. 8.4 ФТ)'''
# Система по истечении срока действия токена выполняет автоматический выход и уведомляет пользователя.

'''Сценарий 38: Авторизация администратора (п. 9.1 ФТ)'''
# Администратор открывает Панель администратора, вводит логин и пароль.
# Система проверяет данные, отправляет код подтверждения на почту.
# Администратор вводит код и получает доступ к панели.

'''Сценарий 39: Поиск пользователя Администратором (п. 9.2 ФТ)'''
# Администратор вводит имя игрока в поиск.
# Система отображает профиль и предоставляет действия: заблокировать, заглушить, отключить, указать время действия.

'''Сценарий 40: Просмотр жалоб Администратором (п. 9.3 ФТ)'''
# Администратор нажимает «Жалобы пользователей».
# Система выводит список жалоб.
# При выборе жалобы отображаются подробности: комментарий, причина, действия пользователя в лобби.

'''Сценарий 41: Пользователь отправляет жалобу (п. 9.3 ФТ)'''
# Пользователь нажимает на имя другого игрока, выбирает «Пожаловаться», вводит причину и комментарий, нажимает «Отправить жалобу».
# Система сохраняет жалобу в реестре как «не рассмотренную».

= Высокоуровневая архитектура =

== Определения ==

=== Архитектура Client-Server. ===

Разрабатываемое приложение построено на архитектуре Client-Server, где клиентское приложение устанавливается на устройстве пользователя и отвечает за отображение интерфейса, обработку ввода, составление уровней и взаимодействие с пользователем, а серверная часть обеспечивает обработку логики многопользовательских сессий, хранение данных, синхронизацию пользователей а также коммуникацию между ними. Клиенты и сервер взаимодействуют по защищённым каналам связи, что обеспечивает безопасность данных и корректную работу многопользовательских функций.

[[Файл:Blind Typer ВысокоуровневаяАрхитектура.png]]

== Детальные требования к основным подсистемам ==

# Подсистема пользовательского интерфейса.(UI)
## При запуске приложения должно открываться главное меню.
## Главное меню должно содержать кнопки "Онлайн", "Оффлайн", "Мой профиль", "Настройки", "Выход"
### При нажатии на кнопку "Онлайн"
### При нажатии на кнопку "Оффлайн"
### При нажатии на кнопку "Мой профиль"
### При нажатии на кнопку "Настройки"
### При нажатии на кнопку "Выход"

# Подсистема авторизации
## Пользователь должен иметь возможность авторизоваться, зарегистрироваться, восстановить свой пароль, нажав на соответствущую кнопку в подменю "Мой профиль", будучи неавторизованным.
# Подсистема отрисовки игры
## Подсистема должна синхронизировать картинку на экране с состоянием игры, описываемой подсистемой контроля игровых фаз.
## Подсистема должна синхронизировать прогресс других игроков с их состоянием, полученным из сетевого модуля.
# Подсистема контроля игровых фаз
## Подсистема должна начинать игру, только после команды от руководящего процессом Пользователя, (UI) Пользователя-Организатора, или (UI) Пользователя в оффлайн режиме.
# Подсистема контроля результата игры
## Подсистема должна обобщать данные прошедшей игры, и передавать их пользователю в графическом и текстовом виде.
# Подсистема контроля лобби
## Подсистема должна предоставлять доступ к лобби для всех желающих игроков.
## Подсистема должна быть настраиваемой пользователем-организатором по его предпочтениям, в том числе режим игры, Рейтинговый/Безрейтинговый, Бесконечный или Кампания.
## Подсистема должна передавать состояние всех пользователей в игре между друг другом для синхронизации прогресса и его визуального отображения в приложении каждого участника.
# Подсистема сетевого модуля
## Подсистема должна передавать информацию от клиента без потерь и обрабатывать её.
## Подсистема должна предоставлять клиенту связь с сервером для обработки данных, т.е отправления и получения в том числе облачных сохранений.
# Подсистема сохранений
## Подсистема должна хранить сохранения локально для всех пользователей.
## Подсистема должна хранить прогресс авторизованных пользователей в облаке для синхронизации между устройствами.
# Подсистема профиля пользователя
## Подсистема должна предоставлять возможность редактирования.
## Подсистема должна предоставлять визуальное текстовое и графическое представление прогресса игрока в игре.